{% extends "layout.html" %}

{% block title %}
    เพิ่มร้านอาหารใหม่
{% endblock %}

{% block content %}
<!-- <h1 class="text-center text-2xl font-bold mb-4">เพิ่มร้านอาหารใหม่</h1> -->

<div class="flex justify-center">

    <form method="post" class="w-full max-w-xl" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="bg-white p-6 rounded shadow-md my-5">

            
            
            <!-- Profile Picture -->
            <div class="py-4 border-gray-200 grid grid-cols-6 items-center justify-center align-middle">
                <label for="file" class="col-span-1 justify-center items-center space-x-4">
                    <div class="relative">
                        {% if user.userprofile.profile_image %}
                            <img id="profilePreview" class="w-16 h-16 object-cover object-center rounded-full border border-black" src="{{ user.userprofile.profile_image.url }}" alt="Profile Image">
                        {% else %}
                            <img class="w-16 h-16 object-cover object-center rounded-full border border-black" src="https://as2.ftcdn.net/v2/jpg/05/65/22/41/1000_F_565224180_QNRiRQkf9Fw0dKRoZGwUknmmfk51SuSS.jpg" alt="Default Profile Image">
                        {% endif %}


                        <input id="file" type="file" name="profile_picture" class="hidden" accept="image/*" onchange="previewImage(event)">
                    </div>
                </label>
                <div class="col-span-1">
                    <button type="submit" name="save_profile_picture" class="text-xs font-medium text-blue-400">เปลี่ยนโปรไฟล์</button>
                </div>
            </div>
        
            <!-- Name Field -->
            <div class="border-t py-4 border-gray-200 grid grid-cols-6 items-center justify-center align-middle">
                <p class="col-span-1 text-xs font-semibold text-black">ชื่อ</p>
                <p id="name-text" class="col-span-3 text-xs font-medium text-gray-500">{{ user.username }}</p>
                <input id="name-input" name="user" class="col-span-5 text-xs font-medium text-gray-500 hidden border px-2 rounded-lg py-3 border-gray-200" type="text" value="{{ user.username }}">
        
                <div id="edit-name-btn" class="col-start-6 col-span-1 text-right">
                    <button type="button" onclick="toggleEdit('name')" class="text-xs font-medium text-blue-400">แก้ไข</button>
                </div>
        
                <div id="save-name-btn" class="hidden col-span-4 col-start-2 flex space-x-2 items-center my-2">
                    <div class="text-center border px-9 rounded-lg py-1 bg-blue-400">
                        <button type="submit" name="save_name" class="text-sm font-medium text-white px-2 py-1">บันทึก</button>
                    </div>
                    <div class="text-center border px-2 rounded-lg py-1 bg-gray-200">
                        <button type="button" onclick="cancelEdit('name')" class="text-sm font-medium text-black px-2 py-1">ยกเลิก</button>
                    </div>
                </div>
            </div>
        
            <!-- Email Field -->
            <div class="border-t py-4 border-gray-200 grid grid-cols-6 items-center justify-center align-middle">
                <p class="col-span-1 text-xs font-semibold text-black">อีเมล</p>
                <p id="email-text" class="col-span-3 text-xs font-medium text-gray-500">{{ user.email }}</p>
                <input id="email-input" name="email" class="col-span-5 text-xs font-medium text-gray-500 hidden border px-2 rounded-lg py-3 border-gray-200" type="email" value="{{ user.email }}">
        
                <div id="edit-email-btn" class="col-start-6 col-span-1 text-right">
                    <button type="button" onclick="toggleEdit('email')" class="text-xs font-medium text-blue-400">แก้ไข</button>
                </div>
        
                <div id="save-email-btn" class="hidden col-span-4 col-start-2 flex space-x-2 items-center my-2">
                    <div class="text-center border px-9 rounded-lg py-1 bg-blue-400">
                        <button type="submit" name="save_email" class="text-sm font-medium text-white px-2 py-1">บันทึก</button>
                    </div>
                    <div class="text-center border px-2 rounded-lg py-1 bg-gray-200">
                        <button type="button" onclick="cancelEdit('email')" class="text-sm font-medium text-black px-2 py-1">ยกเลิก</button>
                    </div>
                </div>
            </div>
        
            <!-- Phone Number Field -->
            <div class="border-t py-4 border-gray-200 grid grid-cols-6 items-center justify-center align-middle">
                <p class="col-span-1 text-xs font-semibold text-black">เบอร์โทรศัพท์</p>
                <p id="phone-text" class="col-span-3 text-xs font-medium text-gray-500">{{ user.userprofile.phone_number }}</p>
                <input id="phone-input" name="phone_number" class="col-span-5 text-xs font-medium text-gray-500 hidden border px-2 rounded-lg py-3 border-gray-200" type="text" value="{{ user.userprofile.phone_number }}">
        
                <div id="edit-phone-btn" class="col-start-6 col-span-1 text-right">
                    <button type="button" onclick="toggleEdit('phone')" class="text-xs font-medium text-blue-400">แก้ไข</button>
                </div>
        
                <div id="save-phone-btn" class="hidden col-span-4 col-start-2 flex space-x-2 items-center my-2">
                    <div class="text-center border px-9 rounded-lg py-1 bg-blue-400">
                        <button type="submit" name="save_phone" class="text-sm font-medium text-white px-2 py-1">บันทึก</button>
                    </div>
                    <div class="text-center border px-2 rounded-lg py-1 bg-gray-200">
                        <button type="button" onclick="cancelEdit('phone')" class="text-sm font-medium text-black px-2 py-1">ยกเลิก</button>
                    </div>
                </div>
            </div>
        
            <!-- About Me Field -->
            <div class="border-y py-4 border-gray-200 grid grid-cols-6 items-center justify-center align-middle">
                <p class="col-span-1 text-xs font-semibold text-black">เกี่ยวกับฉัน</p>
        
                <div id="edit-about-btn" class="col-start-6 col-span-1 text-right">
                    <button type="button" onclick="toggleEdit('about')" class="text-xs font-medium text-blue-400">แก้ไข</button>
                </div>
        
                <p id="about-text" class="mt-3 col-start-1 col-span-full text-xs font-medium text-gray-500">{{ user.userprofile.about_me }}</p>
        
                <textarea id="about-input" name="about_me" class="mt-3 col-start-1 col-span-full text-xs font-medium text-gray-500 hidden border px-2 rounded-lg py-3 border-gray-200">{{ user.userprofile.about_me }}</textarea>
        
                <div id="save-about-btn" class="hidden col-span-4 col-start-1 flex space-x-2 items-center my-2">
                    <div class="text-center border px-9 rounded-lg py-1 bg-blue-400">
                        <button type="submit" name="save_about_me" class="text-sm font-medium text-white px-2 py-1">บันทึก</button>
                    </div>
                    <div class="text-center border px-2 rounded-lg py-1 bg-gray-200">
                        <button type="button" onclick="cancelEdit('about')" class="text-sm font-medium text-black px-2 py-1">ยกเลิก</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white p-6 rounded shadow-md my-5">            
            <div class="grid grid-cols-6 items-center justify-center align-middle">
                <p class="col-span-1 font-medium text-sm text-black">รหัสผ่าน</p>
                <div class="col-start-7 col-span-3 text-right">
                    <button class="bg-blue-500 hover:bg-blue-700 text-white flex justify-center items-center space-x-1 px-2 py-1 h-fit rounded-lg">
                        <svg class="w-4 h-4 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                            <path fill-rule="evenodd" d="M10 5a2 2 0 0 0-2 2v3h2.4A7.48 7.48 0 0 0 8 15.5a7.48 7.48 0 0 0 2.4 5.5H5a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h1V7a4 4 0 1 1 8 0v1.15a7.446 7.446 0 0 0-1.943.685A.999.999 0 0 1 12 8.5V7a2 2 0 0 0-2-2Z" clip-rule="evenodd"/>
                            <path fill-rule="evenodd" d="M10 15.5a5.5 5.5 0 1 1 11 0 5.5 5.5 0 0 1-11 0Zm6.5-1.5a1 1 0 1 0-2 0v1.5a1 1 0 0 0 .293.707l1 1a1 1 0 0 0 1.414-1.414l-.707-.707V14Z" clip-rule="evenodd"/>
                        </svg>                                                
                        <span class="font-medium text-sm">เปลี่ยนรหัสผ่าน</span>
                    </button>
                </div>
            </div>
        </div>
    </form>
    

    <script>
        function toggleEdit(field) {
            document.getElementById(field + '-text').classList.add('hidden');
            document.getElementById(field + '-input').classList.remove('hidden');
            document.getElementById('edit-' + field + '-btn').classList.add('hidden');
            document.getElementById('save-' + field + '-btn').classList.remove('hidden');
        }
        
        function saveField(field) {
            var input = document.getElementById(field + '-input').value;
            document.getElementById(field + '-text').textContent = input;
            document.getElementById(field + '-text').classList.remove('hidden');
            document.getElementById(field + '-input').classList.add('hidden');
            document.getElementById('edit-' + field + '-btn').classList.remove('hidden');
            document.getElementById('save-' + field + '-btn').classList.add('hidden');
        }
        
        function cancelEdit(field) {
            document.getElementById(field + '-input').classList.add('hidden');
            document.getElementById(field + '-text').classList.remove('hidden');
            document.getElementById('edit-' + field + '-btn').classList.remove('hidden');
            document.getElementById('save-' + field + '-btn').classList.add('hidden');
        }
    </script>
        
</div>

{% endblock %}


